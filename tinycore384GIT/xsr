#!/bin/sh


read_options(){
	local choice
	read -p "Enter choice [ 1 - 3] " choice
	echo ""
	echo ""
	echo "---------------------"
	echo ""
	echo ""
	case $choice in
		1) XSRmenu ;;
		2) RDPmenu ;;
		3) exit 0;;
		*) echo -e "${RED}Error...${STD}" && sleep 2
	esac
}

show_menu() {
	clear
	echo "~~~~~~~~~~~~~~~~~~~~~"	
	echo " M A I N - M E N U"
	echo "~~~~~~~~~~~~~~~~~~~~~"
	echo "1. X Connection (The linux Server must have installed Telnet Server and the Lxpanel)"
	echo "2. RDP Connection"
	echo "3. Exit"
	
}

#############################################################################

XSRmenu() {


read -p "Input Telnet Username = " USER;read -p "Input Telnet Password = " PASS;(echo " Welcome Please Wait...";echo -e "\r";sleep 10;echo $USER;echo -e "\r";sleep 3;echo $PASS; echo -e "\r";sleep 3;echo "export DISPLAY=$getLocIP:0";echo -e "\r";sleep 3;echo "lxpanel";echo -e "\r";sleep 555)|telnet $getSerIP || exit 0
}

RDPmenu() {
echo $getSerIP;read -p "Input RDP SERVER Username = " USER;read -p "Input RDP SERVER Password = " PASS;rdesktop -f -p $PASS -u $USER $getSerIP || exit 0
}


#=====================
#WAIT FOR NETWORK (I MUST EXAMINE)
#=====================
count=0
#echo -n Waiting for the network...
while [ "$count" -lt 60 ]; 
do
ifconfig eth0 | grep -q inet && break
sleep 1
count=$((count + 1))
echo -n .
done

#===========================================




getSerIP=192.168.1.111
getLocIP=`ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'`
#USER=user01
#PASS=123456



#wait five sec
echo "Please wait"
count=0
while [ "$count" -lt 5 ]; 
do
sleep 1
count=$((count + 1))
echo -n .
done


show_menu
read_options










